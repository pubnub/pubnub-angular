!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),
e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";c(1),c(2),c(6),c(7)},function(a,b){
"use strict";"function"!=typeof Object.create&&(Object.create=function(){var a=function(){};return function(b){if(arguments.length>1)throw new Error("Second argument not supported");
if(b!==Object(b)&&null!==b)throw new TypeError("Argument must be an object or null");if(null===b)throw Error("null [[Prototype]] not supported");
a.prototype=b;var c=new a;return a.prototype=null,c}}())},function(a,b,c){"use strict";var d=c(3),e=c(4);angular.module("pubnub.angular.service",[]).factory("Pubnub",["$rootScope",function(a){
if(!angular.isDefined(PUBNUB))throw new Error("PUBNUB is not in global scope. Ensure that pubnub.js file is included before pubnub-angular.js");
var b={},c={};return b.init=function(a){return b.getInstance(d.default_instance_name).init(a)},b.getInstance=function(f){
var g=c[f];return angular.isDefined(g)&&g instanceof e?g:"string"==typeof f&&f.length>0?(c[f]=new e(f,b,a),d.methods_to_delegate.forEach(function(a){
c[f].wrapMethod(a),b[a]=function(b){return this.getInstance(d.default_instance_name)[a](b)}}),c[f]):g},b.getEventNameFor=function(a,b,c){
return c||(c=d.default_instance_name),[d.pubnub_prefix,c,a,b].join(":")},b.getMessageEventNameFor=function(a,b){return b||(b=d.default_instance_name),
[d.pubnub_prefix,b,"subscribe","callback",a].join(":")},b.getPresenceEventNameFor=function(a,b){return b||(b=d.default_instance_name),
[d.pubnub_prefix,b,"subscribe","presence",a].join(":")},b.subscribe=function(a){this.getInstance(d.default_instance_name).subscribe(a);
},b}])},function(a,b){a.exports={pubnub_prefix:"pubnub",default_instance_name:"default",methods_to_delegate:["history","replay","publish","unsubscribe","here_now","grant","revoke","audit","time","where_now","state","channel_group","channel_group_list_channels","channel_group_list_groups","channel_group_list_namespaces","channel_group_remove_channel","channel_group_remove_group","channel_group_remove_namespace","channel_group_add_channel","channel_group_cloak","set_uuid","get_uuid","uuid","auth","set_cipher_key","get_cipher_key","raw_encrypt","raw_decrypt","set_heartbeat","get_heartbeat","set_heartbeat_interval","get_heartbeat_interval","mobile_gw_provision"],
common_callbacks_to_wrap:["callback","error"],subscribe_callbacks_to_wrap:["callback","connect","reconnect","disconnect","error","idle","presence"]
}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,
"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),
b}}(),f=c(3),g=c(5);a.exports=function(){function a(b,c,e){d(this,a),this.label=b,this.mockingInstance=new g(b,c,e),this.pubnubInstance=null;
}return e(a,[{key:"init",value:function(a){this.pubnubInstance=new PUBNUB(a)}},{key:"getLabel",value:function(){return this.label;
}},{key:"subscribe",value:function(a){var b=this.mockingInstance.getCallbacksToMock(a,f.subscribe_callbacks_to_wrap);this.mockingInstance.mockCallbacks(this.getLabel(),"subscribe",a,b),
this.getOriginalInstance().subscribe(a)}},{key:"getOriginalInstance",value:function(){if(this.pubnubInstance)return this.pubnubInstance;
throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.")}},{key:"wrapMethod",
value:function(a){var b=this;this[a]=function(c){if(angular.isObject(c)){var d=b.mockingInstance.getCallbacksToMock(c,f.common_callbacks_to_wrap);
b.mockingInstance.mockCallbacks(b.getLabel(),a,c,d)}return b.getOriginalInstance()[a](c)}}}]),a}()},function(a,b){"use strict";
function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=function(){function a(a,b){
for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d);
}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a.exports=function(){function a(b,d,e){c(this,a),this.label=b,
this.$rootScope=e,this.service=d}return d(a,[{key:"getCallbacksToMock",value:function(a,b){var c=a.triggerEvents,d=[],e=void 0,f=void 0,g=void 0;
if(c===!0)return b;if(angular.isObject(c)){for(e=c.length,g=0;e>g;g++)f=c[g],b.indexOf(f)>=0&&d.push(f);return d}return[];
}},{key:"mockCallbacks",value:function(a,b,c,d){var e=void 0,f=void 0,g=d.length,h=void 0;for(h=0;g>h;h++){if(!angular.isObject(c))return;
f=d[h],e=c[f],c[f]=this.generateMockedVersionOfCallback(e,f,b,a)}}},{key:"generateMockedVersionOfCallback",value:function(a,b,c,d){
var e=this.$rootScope,f=this.service;return function(){if(e.$broadcast.bind.apply(e.$broadcast,[e,f.getEventNameFor(c,b,d)].concat(Array.prototype.slice.call(arguments)))(),
b&&angular.isFunction(a)&&a.apply(null,arguments),"subscribe"===c)switch(b){case"callback":e.$broadcast.bind.apply(e.$broadcast,[e,f.getMessageEventNameFor(arguments[2],d)].concat(Array.prototype.slice.call(arguments)))();
break;case"presence":e.$broadcast.bind.apply(e.$broadcast,[e,f.getPresenceEventNameFor(arguments[2],d)].concat(Array.prototype.slice.call(arguments)))();
}}}}]),a}()},function(a,b,c){"use strict";var d=c(3);angular.module("pubnub.angular.service").factory("$pubnubChannel",["$rootScope","Pubnub","$q",function(a,b,c){
function e(c,f){if(!(this instanceof e))return new e(c,f);if(f=f||{},!c)throw new Error("The channel name is required");if(f.autosubscribe&&"boolean"!=typeof f.autosubscribe)throw new Error("The autosubscribe parameter should be a boolean");
if(f.presence&&"boolean"!=typeof f.presence)throw new Error("The presence parameter should be a boolean");if(f.autostore&&"boolean"!=typeof f.autostore)throw new Error("The autostore parameter should be a boolean");
var g=this;this._channel=c,this.$messages=[],this._timeTokenFirstMessage=null,this._messagesAllFetched=!1,this._pubnubInstance=f.instance?b.getInstance(f.instance):b.getInstance(d.default_instance_name),
this._autoload=null==f.autoload?0:f.autoload,this._presence=null==f.presence?!1:f.presence,this._autosubscribe=null==f.autosubscribe?!0:f.autosubscribe,
this._autostore=null==f.autostore?!0:f.autostore,this.$$getPublicMethods(function(a,b){g.$messages[b]=a.bind(g)}),this._unsubscribeHandler=null,
0!==this._autoload&&this.$load(this._autoload);var h=["callback","connect","reconnect","disconnect","error","idle"];if(this._presence&&h.push("presence"),
this._autosubscribe&&this._pubnubInstance.subscribe({channel:this._channel,triggerEvents:h}),this._autostore){var i=b.getMessageEventNameFor(g._channel,this._pubnubInstance.label);
this._unsubscribeHandler=a.$on(i,g.$$newMessage.bind(g))}return this.$messages}return e.prototype={$load:function(b){if(!(b>0&&100>=b))throw new Error("The number of messages to load should be a number between 0 and 100");
var d=this,e=c.defer(),f={channel:d._channel,count:b,reverse:!1,callback:function(c){d._timeTokenFirstMessage=c[1],d.$$storeBatch(c[0]),
c[0].length<b&&(d._messagesAllFetched=!0),e.resolve(c),a.$digest()},error:function(a){e.reject(a)}};return d._timeTokenFirstMessage&&(f.start=d._timeTokenFirstMessage),
d._pubnubInstance.history(f),e.promise},$publish:function(a){var b=this,d=c.defer();return b._pubnubInstance.publish({channel:b._channel,
message:a,callback:function(a){d.resolve(a)},error:function(a){d.reject(a)}}),d.promise},$pubnubInstance:function(){return this._pubnubInstance;
},$channel:function(){return this._channel},$allLoaded:function(){return this._messagesAllFetched},$destroy:function(){this._unsubscribeHandler&&this._unsubscribeHandler(),
this.$messages.length=0},$$newMessage:function(b,c){this.$$store(c),a.$digest()},$$store:function(a){this.$messages.push(a);
},$$storeBatch:function(a){0===this.$messages.length?angular.extend(this.$messages,a):Array.prototype.unshift.apply(this.$messages,a);
},$$getPublicMethods:function(a,b){this.$$getPrototypeMethods(function(c,d){"function"==typeof c&&"_"!==d.charAt(0)&&a.call(b,c,d);
})},$$getPrototypeMethods:function(a,b){for(var c={},d=Object.getPrototypeOf({}),e=angular.isFunction(this)&&angular.isObject(this.prototype)?this.prototype:Object.getPrototypeOf(this);e&&e!==d;){
for(var f in e)e.hasOwnProperty(f)&&!c.hasOwnProperty(f)&&(c[f]=!0,a.call(b,e[f],f,e));e=Object.getPrototypeOf(e)}}},e.$extend=function(a){
if(!angular.isObject(a))throw new Error("The methods parameter should be an object");var b=function c(a,b){return this instanceof e?(e.apply(this,arguments),
this.$messages):new c(a,b)};return b.prototype=Object.create(e.prototype),angular.extend(b.prototype,a),b},e}])},function(a,b,c){
"use strict";var d=c(3);angular.module("pubnub.angular.service").factory("$pubnubChannelGroup",["$rootScope","$q","Pubnub","$pubnubChannel",function(a,b,c,e){
function f(b,g){if(!(this instanceof f))return new f(b,g);var h=this,i=g||{};if(!b)throw new Error("The channel group name is required");
if(i.autosubscribe&&"boolean"!=typeof i.autosubscribe)throw new Error("The autosubscribe parameter should be a boolean");if(i.presence&&"boolean"!=typeof i.presence)throw new Error("The presence parameter should be a boolean");
if(i.channelExtension&&!angular.isObject(i.channelExtension))throw new Error("The channelExtension should be an object");this._channelGroup=b,
this.$channels={},this._pubnubInstance=i.instance?c.getInstance(i.instance):c.getInstance(d.default_instance_name),this._presence=null==i.presence?!1:i.presence,
this._autosubscribe=null==i.autosubscribe?!0:i.autosubscribe,this._extendedChannel=i.channelExtension?e.$extend(i.channelExtension):null,
this._unsubscribeHandler=null;var j=["callback","connect","reconnect","disconnect","error","idle"];this._presence&&j.push("presence"),
this._autosubscribe&&this._pubnubInstance.subscribe({channel_group:this._channelGroup,triggerEvents:j});var k=c.getMessageEventNameFor(h._channelGroup,h._pubnubInstance.label);
return this._unsubscribeHandler=a.$on(k,h.$$newMessage.bind(h)),this}return f.prototype={$channel:function(a){if(!angular.isDefined(this.$channels[a])){
var b={instance:this._pubnubInstance.label,autosubscribe:!1,presence:!1,autostore:!0},c=this._extendedChannel?new this._extendedChannel(a,b):e(a,b);
this.$channels[a]=c}return this.$channels[a]},$pubnubInstance:function(){return this._pubnubInstance},$channelGroup:function(){
return this._channelGroup},$destroy:function(){this._unsubscribeHandler();for(var a in this.$channels)this.$channels.hasOwnProperty(a)&&delete this.$channels[a];
},$$newMessage:function(a,b,c){var d=c[3];this.$channel(d).$$newMessage(a,b,c)}},f}])}]);
//# sourceMappingURL=pubnub-angular.min.js.map